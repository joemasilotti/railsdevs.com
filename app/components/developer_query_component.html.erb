<div class="bg-gray-50">
  <div class="px-4 text-center sm:px-6 lg:max-w-7xl lg:px-6 border-y border-gray-200">
    <%= form_with url: developers_path, method: :get, html: {class: "py-6"} do |form| %>
      <h3 class="sr-only"><%= t(".title") %></h3>

      <div class="flex items-center justify-between">
        <div data-controller="toggle" data-toggle-close-class="hidden" class="relative z-10 inline-block text-left">
          <div>
            <button type="button" data-action="toggle#toggle" class="group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900" aria-expanded="false" aria-haspopup="true">
              <%= t(".sort.title") %>
              <%= inline_svg_tag "icons/solid/chevron_down.svg", class: "flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" %>
            </button>
          </div>

          <div data-toggle-target="element" class="origin-top-left absolute left-0 z-10 mt-2 w-40 rounded-md shadow-2xl bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden" role="menu" aria-orientation="vertical" aria-labelledby="mobile-menu-button" tabindex="-1">
            <div class="py-1" role="none">
              <%= render SortButtonComponent.new(title: t(".sort.newest"), name: :sort, value: :newest, enabled: sort == :newest) %>
              <%= render SortButtonComponent.new(title: t(".sort.availability"), name: :sort, value: :availability, enabled: sort == :availability) %>
            </div>
          </div>
        </div>

        <div class="hidden sm:flex sm:items-baseline sm:space-x-8">
          <%# TODO: Add Filter button on mobile that toggles mobile filter menu. Hide inline filters on mobile. %>
          <div data-controller="toggle" data-toggle-close-class="hidden" class="relative z-10 inline-block text-left">
            <div>
              <button type="button" data-action="toggle#toggle" class="group inline-flex items-center justify-center text-sm font-medium text-gray-700 hover:text-gray-900" aria-expanded="false">
                <span><%= t(".work_preference.title") %></span>
                <%= inline_svg_tag "icons/solid/chevron_down.svg", class: "flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" %>
              </button>
            </div>

            <div data-toggle-target="element" class="origin-top-right absolute right-0 w-64 mt-2 bg-white rounded-md shadow-2xl p-4 ring-1 ring-black ring-opacity-5 focus:outline-none hidden">
              <div class="space-y-4">
                <%= form.collection_check_boxes(:role_types, role_types, :first, :last, {include_hidden: false}) do |b| %>
                  <div class="flex items-center">
                    <%= b.check_box class: "h-4 w-4 border-gray-300 rounded text-gray-600 focus:ring-gray-500", checked: role_selected?(b.object) %>
                    <%= b.label class: "ml-3 pr-6 text-sm font-medium text-gray-900 whitespace-nowrap" %>
                  </div>
                <% end %>

                <hr>

                <div class="flex items-top">
                  <%= form.check_box :include_not_interested, class: "mt-1 h-4 w-4 border-gray-300 rounded text-gray-600 focus:ring-gray-500", include_hidden: false, checked: include_not_interested? %>
                  <%= form.label :include_not_interested, t(".include_not_interested"), class: "ml-3 pr-6 text-sm font-medium text-gray-900" %>
                </div>
              </div>

              <div class="pt-5">
                <div class="flex justify-end">
                  <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                    <%= t(".apply") %>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div data-controller="toggle" data-toggle-close-class="hidden" class="relative z-10 inline-block text-left">
            <div>
              <button type="button" data-action="toggle#toggle" class="group inline-flex items-center justify-center text-sm font-medium text-gray-700 hover:text-gray-900" aria-expanded="false">
                <span><%= t(".timezone.title") %></span>
                <%= inline_svg_tag "icons/solid/chevron_down.svg", class: "flex-shrink-0 -mr-1 ml-1 h-5 w-5 text-gray-400 group-hover:text-gray-500" %>
              </button>
            </div>

            <div data-toggle-target="element" class="origin-top-right absolute right-0 mt-2 bg-white rounded-md shadow-2xl p-4 ring-1 ring-black ring-opacity-5 focus:outline-none hidden">
              <div class="space-y-4">
                <%= form.collection_check_boxes(:utc_offsets, time_zones, :first, :last, {include_hidden: false}) do |b| %>
                  <div class="flex items-center">
                    <%= b.check_box class: "h-4 w-4 border-gray-300 rounded text-gray-600 focus:ring-gray-500", checked: time_zone_selected?(b.object) %>
                    <%= b.label class: "ml-3 pr-6 text-sm font-medium text-gray-900 whitespace-nowrap" %>
                  </div>
                <% end %>
              </div>

              <div class="pt-5">
                <div class="flex justify-end">
                  <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                    <%= t(".apply") %>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div class="bg-gray-50">
  <div class="fixed inset-0 flex z-40 sm:hidden" role="dialog" aria-modal="true">
    <div class="fixed inset-0 bg-black bg-opacity-25" aria-hidden="true"></div>
    <div class="ml-auto relative max-w-xs w-full h-full bg-white shadow-xl py-4 pb-6 flex flex-col overflow-y-auto">
      <div class="px-4 flex items-center justify-between">
        <h2 class="text-lg font-medium text-gray-900">Filters</h2>
        <button type="button" class="-mr-2 w-10 h-10 bg-white p-2 rounded-md flex items-center justify-center text-gray-400 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
          <span class="sr-only">Close menu</span>
          <%= inline_svg_tag "icons/outline/x.svg", class: "h-6 w-6" %>
        </button>
      </div>

      <%= form_with url: developers_path, method: :get, html: {class: "mt-4"} do |form| %>
        <div class="border-t border-gray-200 px-4 py-6">
          <h3 class="-mx-2 -my-3 flow-root">
            <button type="button" class="px-2 py-3 bg-white w-full flex items-center justify-between text-sm text-gray-400" aria-controls="filter-section-0" aria-expanded="false">
              <span class="font-medium text-gray-900"><%= t(".work_preference.title") %></span>
              <span class="ml-6 flex items-center">
                <%# TODO: Add rotate-180 to class list when expanded. %>
                <%= inline_svg_tag "icons/solid/chevron_down.svg", class: "rotate-0 h-5 w-5 transform" %>
              </span>
            </button>
          </h3>

          <div class="pt-6" id="filter-section-0">
            <div class="space-y-6">
              <%= form.collection_check_boxes(:role_types, role_types, :first, :last, {include_hidden: false}) do |b| %>
                <div class="flex items-center">
                  <%= b.check_box class: "h-4 w-4 border-gray-300 rounded text-indigo-600 focus:ring-indigo-500", checked: role_selected?(b.object) %>
                  <%= b.label class: "ml-3 text-sm text-gray-500" %>
                </div>
              <% end %>
            </div>
          </div>
        </div>

        <div class="border-t border-gray-200 px-4 py-6">
          <%# TODO: Add remaining filters. %>
        </div>
      <% end %>
    </div>
  </div>
</div>
